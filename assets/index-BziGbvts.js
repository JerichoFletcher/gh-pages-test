var it=n=>{throw TypeError(n)};var nt=(n,t,e)=>t.has(n)||it("Cannot "+e);var r=(n,t,e)=>(nt(n,t,"read from private field"),e?e.call(n):t.get(n)),c=(n,t,e)=>t.has(n)?it("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),a=(n,t,e,s)=>(nt(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();const z="OES_vertex_array_object";var T=(n=>(n[n.WebGL1=0]="WebGL1",n[n.WebGL2=1]="WebGL2",n))(T||{}),M,x;class ot{constructor(t){c(this,M);c(this,x);if(a(this,M,t),a(this,x,new Map),t.version===0){const e=t.gl.getExtension(z);e&&this.setExtension(z,{create:this.callWithContext(e,e.createVertexArrayOES),bind:this.callWithContext(e,e.bindVertexArrayOES),delete:this.callWithContext(e,e.deleteVertexArrayOES),isVAO:this.callWithContext(e,e.isVertexArrayOES)})}else this.setExtension(z,{create:this.callWithContext(t.gl,t.gl.createVertexArray),bind:this.callWithContext(t.gl,t.gl.bindVertexArray),delete:this.callWithContext(t.gl,t.gl.deleteVertexArray),isVAO:this.callWithContext(t.gl,t.gl.isVertexArray)})}callWithContext(t,e){return(...s)=>e.call(t,...s)}getExtension(t){if(!r(this,x).has(t))throw new Error(`Missing WebGL extension: ${t}`);return r(this,x).get(t)}setExtension(t,e){r(this,x).set(t,e)}get context(){return r(this,M)}get vertexArrayObject(){return this.getExtension(z)}}M=new WeakMap,x=new WeakMap;var N,$;const I=class I{constructor(t){c(this,N);c(this,$);a(this,N,t),a(this,$,new ot(t))}static latest(t){const e=t.getContext("webgl2");if(e)return new I({version:T.WebGL2,gl:e});const s=t.getContext("webgl");if(s)return new I({version:T.WebGL1,gl:s});throw new Error("Failed to create WebGL wrapper: WebGL not supported")}static ofVersion(t,e){let s;switch(e){case T.WebGL1:s=t.getContext("webgl");break;case T.WebGL2:s=t.getContext("webgl2");break}if(!s)throw new Error("Failed to create WebGL wrapper: Version not supported");return new I({version:e,gl:s})}get context(){return r(this,N)}get extension(){return r(this,$)}};N=new WeakMap,$=new WeakMap;let Y=I;var _,B,F;const k=class k{constructor(t,e,s){c(this,_);c(this,B);c(this,F);a(this,_,t),a(this,B,e),a(this,F,s)}static validBeforeDisposed(t,e){return new k(t,0,e)}static validAfterDisposed(t,e){return new k(t,1,e)}executeWhenValid(t){switch(r(this,B)){case 0:if(r(this,_).isDisposed)throw new Error("Invalid state: Already disposed");return t();case 1:if(!r(this,_).isDisposed)throw new Error("Invalid state: Not disposed");return t()}}get value(){return this.executeWhenValid(()=>r(this,F))}set value(t){this.executeWhenValid(()=>a(this,F,t))}};_=new WeakMap,B=new WeakMap,F=new WeakMap;let V=k;var q=(n=>(n[n.Vertex=0]="Vertex",n[n.Fragment=1]="Fragment",n))(q||{}),E,W,U,O;const Z=class Z{constructor(t,e,s){c(this,E);c(this,W);c(this,U);c(this,O);a(this,W,t),a(this,U,e);const i=t.context.gl,o=i.createShader(e===0?i.VERTEX_SHADER:i.FRAGMENT_SHADER);if(!o){const l=i.getError();throw new Error(`Failed to create shader (error code ${l})`)}if(i.shaderSource(o,s),i.compileShader(o),!i.getShaderParameter(o,i.COMPILE_STATUS)){const l=i.getError(),g=i.getShaderInfoLog(o);throw i.deleteShader(o),new Error(`Failed to compile shader (error code: ${l}): ${g}`)}a(this,O,V.validBeforeDisposed(this,o)),a(this,E,!1)}static create(t,e,s){return new Z(t,e,s)}get contextWrapper(){return r(this,W)}get type(){return r(this,U)}get shader(){return r(this,O).value}get isDisposed(){return r(this,E)}dispose(){r(this,E)||(r(this,W).context.gl.deleteShader(r(this,O).value),a(this,E,!0))}};E=new WeakMap,W=new WeakMap,U=new WeakMap,O=new WeakMap;let G=Z;var w,f,m,R,C,A,P;const tt=class tt{constructor(t,e,s){c(this,w);c(this,f);c(this,m);c(this,R);c(this,C);c(this,A);c(this,P);a(this,f,t);const i=t.context.gl,o=i.createProgram();if(!o){const d=i.getError();throw new Error(`Failed to create program (error code ${d})`)}if(i.attachShader(o,e.shader),i.attachShader(o,s.shader),i.linkProgram(o),!i.getProgramParameter(o,i.LINK_STATUS)){const d=i.getError(),h=i.getProgramInfoLog(o);throw i.deleteProgram(o),new Error(`Failed to link program (error code: ${d}): ${h}`)}a(this,A,new Map),a(this,P,new Map);const l=i.getProgramParameter(o,i.ACTIVE_UNIFORMS);for(let d=0;d<l;d++){const h=i.getActiveUniform(o,d),L=i.getUniformLocation(o,h.name);r(this,A).set(h.name,{name:h.name,size:h.size,type:h.type,location:L})}const g=i.getProgramParameter(o,i.ACTIVE_ATTRIBUTES);for(let d=0;d<g;d++){const h=i.getActiveAttrib(o,d),L=i.getAttribLocation(o,h.name);r(this,P).set(h.name,{name:h.name,size:h.size,type:h.type,location:L})}a(this,m,V.validBeforeDisposed(this,o)),a(this,R,e),a(this,C,s),a(this,w,!1)}static create(t,e,s){return new tt(t,e,s)}use(){r(this,f).context.gl.useProgram(r(this,m).value)}setUniform(t,e){const s=r(this,f).context.gl,i=r(this,A).get(t);if(!i)throw new Error(`Unknown uniform: ${t}`);if(typeof e=="number")s.uniform1f(i.location,e);else if(Array.isArray(e))switch(e.length){case 2:s.uniform2fv(i.location,e);break;case 3:s.uniform3fv(i.location,e);break;case 4:s.uniform4fv(i.location,e);break;default:throw new Error(`Unsupported uniform array size: ${e.length}`)}else if(e instanceof Float32Array)switch(e.length){case 4:s.uniformMatrix2fv(i.location,!1,e);break;case 9:s.uniformMatrix3fv(i.location,!1,e);break;case 16:s.uniformMatrix4fv(i.location,!1,e);break;default:throw new Error(`Unsupported uniform matrix size: ${e.length}`)}}get contextWrapper(){return r(this,f)}get program(){return r(this,m).value}get vertexShader(){return r(this,R)}get fragmentShader(){return r(this,C)}get uniforms(){return r(this,A)}get attributes(){return r(this,P)}get isDisposed(){return r(this,w)}dispose(){r(this,w)||(r(this,f).context.gl.detachShader(r(this,m),r(this,R).shader),r(this,f).context.gl.detachShader(r(this,m),r(this,C).shader),r(this,f).context.gl.deleteProgram(r(this,m)),a(this,w,!0))}};w=new WeakMap,f=new WeakMap,m=new WeakMap,R=new WeakMap,C=new WeakMap,A=new WeakMap,P=new WeakMap;let K=tt;var X=(n=>(n[n.Array=0]="Array",n[n.Element=1]="Element",n))(X||{}),J=(n=>(n[n.Static=0]="Static",n[n.Dynamic=1]="Dynamic",n[n.Stream=2]="Stream",n))(J||{}),p,u,D,H,v;const et=class et{constructor(t,e,s){c(this,p);c(this,u);c(this,D);c(this,H);c(this,v);a(this,u,t),a(this,D,e),a(this,H,s);const i=t.context.gl.createBuffer();if(!i){const o=t.context.gl.getError();throw new Error(`Failed to create buffer object (error code: ${o})`)}a(this,v,V.validBeforeDisposed(this,i)),a(this,p,!1)}static create(t,e,s){return new et(t,e,s)}get target(){switch(r(this,D)){case 0:return r(this,u).context.gl.ARRAY_BUFFER;case 1:return r(this,u).context.gl.ELEMENT_ARRAY_BUFFER}}get usage(){switch(r(this,H)){case 0:return r(this,u).context.gl.STATIC_DRAW;case 1:return r(this,u).context.gl.DYNAMIC_DRAW;case 2:return r(this,u).context.gl.STREAM_DRAW}}bind(){const t=r(this,v).value;r(this,u).context.gl.bindBuffer(this.target,t)}unbind(){r(this,u).context.gl.bindBuffer(this.target,null)}setData(t){this.bind(),r(this,u).context.gl.bufferData(this.target,t,this.usage),this.unbind()}get contextWrapper(){return r(this,u)}get type(){return r(this,D)}get buffer(){return r(this,v).value}get isDisposed(){return r(this,p)}dispose(){r(this,p)||(r(this,u).context.gl.deleteBuffer(r(this,v)),a(this,p,!0))}};p=new WeakMap,u=new WeakMap,D=new WeakMap,H=new WeakMap,v=new WeakMap;let j=et;var y,b,S;const rt=class rt{constructor(t){c(this,y);c(this,b);c(this,S);a(this,b,t);const e=t.extension.vertexArrayObject.create();if(!e){const s=t.context.gl.getError();throw new Error(`Failed to create VAO (error code ${s})`)}a(this,S,V.validBeforeDisposed(this,e)),a(this,y,!1)}static create(t){return new rt(t)}bind(){r(this,b).extension.vertexArrayObject.bind(r(this,S).value)}unbind(){r(this,b).extension.vertexArrayObject.bind(null)}setAttribute(t,e,s,i,o,l){this.bind(),e.bind();const g=r(this,b).context.gl;g.enableVertexAttribArray(t),g.vertexAttribPointer(t,s,i,!1,o,l),e.unbind(),this.unbind()}bindElementBuffer(t){this.bind(),t.bind(),this.unbind()}get contextWrapper(){return r(this,b)}get vao(){return r(this,S).value}get isDisposed(){return r(this,y)}dispose(){r(this,y)||(r(this,b).extension.vertexArrayObject.delete(r(this,S).value),a(this,y,!0))}};y=new WeakMap,b=new WeakMap,S=new WeakMap;let Q=rt;var at=`#version 100
precision mediump float;

attribute vec2 a_position;
attribute vec3 a_color;
varying vec3 v_color;

void main(){
  v_color = a_color;
  gl_Position = vec4(a_position, 0.0, 1.0);
}`,ct=`#version 100
precision mediump float;

varying vec3 v_color;
uniform float u_time;

void main(){
  vec3 rolledColor = mod(v_color + vec3(u_time), 1.0);
  gl_FragColor = vec4(rolledColor, 1.0);
}`;function ht(n){const t=()=>{n.width=window.innerWidth,n.height=window.innerHeight};document.addEventListener("resize",t),t();const e=Y.latest(n),s=e.context.gl;return console.log("Loaded WebGL version:",s.getParameter(s.VERSION)),e}function lt(n){const t=n.context.gl,e=G.create(n,q.Vertex,at),s=G.create(n,q.Fragment,ct),i=K.create(n,e,s),o=new Float32Array([-.5,-.5,.5,.5,0,.5,-.5,0,1,0,.5,.5,0,.5,.5,-.5,.5,.5,0,.5]),l=new Int16Array([0,1,2,0,2,3]),g=j.create(n,X.Array,J.Static),d=j.create(n,X.Element,J.Static);g.setData(o),d.setData(l);const h=Q.create(n);h.setAttribute(0,g,2,t.FLOAT,5*Float32Array.BYTES_PER_ELEMENT,0),h.setAttribute(1,g,3,t.FLOAT,5*Float32Array.BYTES_PER_ELEMENT,2*Float32Array.BYTES_PER_ELEMENT),h.bindElementBuffer(d);function L(st){t.clear(t.COLOR_BUFFER_BIT),i.use(),i.setUniform("u_time",st/3e3),h.bind(),t.drawElements(t.TRIANGLES,l.length,t.UNSIGNED_SHORT,0),h.unbind(),requestAnimationFrame(L)}L(0)}function dt(){const n=document.getElementById("cnv"),t=ht(n);lt(t)}dt();
